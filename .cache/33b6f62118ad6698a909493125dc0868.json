{"dependencies":[{"name":"./scripts/prettify/prettify.js","dynamic":true},{"name":"./scripts/prettify/lang-css.js","dynamic":true},{"name":"./styles/prettify-tomorrow.css","dynamic":true},{"name":"./styles/jsdoc-default.css","dynamic":true},{"name":"./index.html","dynamic":true},{"name":"./Toucher.html","dynamic":true},{"name":"./scripts/linenumber.js","dynamic":true}],"generated":{"html":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"utf-8\">\n    <title>JSDoc: Source: index.js</title>\n\n    <script src=\"/dist/82925e750b5dfbc812e4cfbef12e6a4b.js\"> </script>\n    <script src=\"/dist/65fd76dcd8f939651d469de1419f8b67.js\"> </script>\n    <!--[if lt IE 9]>\n      <script src=\"//html5shiv.googlecode.com/svn/trunk/html5.js\"></script>\n    <![endif]-->\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"/dist/929371e9d334e936e899bcf3ab62baa4.css\">\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"/dist/a17f846d3345b7301375c01feeabe8af.css\">\n</head>\n\n<body>\n\n<div id=\"main\">\n\n    <h1 class=\"page-title\">Source: index.js</h1>\n\n    \n\n\n\n    \n    <section>\n        <article>\n            <pre class=\"prettyprint source linenums\"><code>import {supportTouch} from './env'\n\nconst TAP_DELAY_TIME = 200\n/**\n * Represents a book.\n * @constructor\n * @param {string} title - The title of the book.\n * @param {string} author - The author of the book.\n */\nclass Toucher {\n  constructor(\n    target\n  ) {\n    this.target = target\n    this.events = {}\n\n    // init data\n    Object.assign(this, {\n      target,\n      events: {},\n      touchStartTime: 0,\n      lastTouchTime: 0,\n      x1:0,y1:0,x2:0,y2:0,\n      longTapTimer: null\n    })\n  }\n\n  /**\n   * \n   */\n  init() {\n    this.target.addEventListener('touchstart', this.touchStart.bind(this))\n    this.target.addEventListener('touchend', this.touchEnd.bind(this))\n    // DOM.addEventListener('touchmove',touchmove);\n    // DOM.addEventListener('touchcancel',actionOver);\n  }\n\n  _emit(type, e) {\n    console.log(type, e)\n  }\n  \n  _addEvent(\n    target, \n    type, \n    fn, \n    {\n      stop=true\n    }={}) {\n    if(!target || !target.nodeType) {return false}\n\n    if(typeof this.events[type] === 'undefined') {\n      this.events[type] = []\n      // this._emit(this.events[type]) \n      // // 只绑定一次事件\n      // target.addEventListener(type, (e)=>{ \n      //   if (stop &amp;&amp; e.stopPropagation) { \n      //     e.stopPropagation() \n      //   }\n      //   this._emit(this.events[type]) \n      // }, false)          \n    }\n\n    this.events[type].push(fn)    \n  }\n\n  touchStart(e) {\n    Object.assign(this, {\n\t\t\tx1: e.touches[0].pageX,\n\t\t\ty1: e.touches[0].pageY,\n\t\t\tx2: 0,\n\t\t\ty2: 0,\n      touchStartTime: new Date()\n    })\n\n    clearTimeout(this.longTapTimer);\n\t\tthis.longTapTimer = setTimeout(()=>{\n      //断定此次事件为长按事件\n      this._emit('longTap',e);\n    },500);\n  }\n\n  touchEnd(e) {\n    clearTimeout(this.longTapTimer);    \n    \n    var now = new Date()\n    if(now - this.lastTouchTime > TAP_DELAY_TIME) {\n      this._emit('tap', e)\n    }\n    this.lastTouchTime = now\n  }\n\n  tap(fn, option) {\n    this._addEvent(this.target, 'tap', fn, option)\n\n    return this\n  }\n\n  longTap(fn, option) {\n    this._addEvent(this.target, 'longTap', fn, option)\n\n    return this\n  }\n}\n\nexport default (target, option)=>{ \n  if(!supportTouch) {\n    console.log('当前环境不支持触摸手势')\n    return null\n  }\n \n  const t = new Toucher(target, option)\n  t.init()\n  return t\n}</code></pre>\n        </article>\n    </section>\n\n\n\n\n</div>\n\n<nav>\n    <h2><a href=\"/dist/index.html\">Home</a></h2><h3>Classes</h3><ul><li><a href=\"/dist/db4e284f2d835cff8d4911778992d23e.html\">Toucher</a></li></ul>\n</nav>\n\n<br class=\"clear\">\n\n<footer>\n    Documentation generated by <a href=\"https://github.com/jsdoc3/jsdoc\">JSDoc 3.5.5</a> on Sat Jan 13 2018 10:52:43 GMT+0800 (CST)\n</footer>\n\n<script> prettyPrint(); </script>\n<script src=\"/dist/8cd8c0300741339ec8cf0b3d28d6183f.js\"> </script>\n</body>\n</html>\n"},"hash":"82b72c46f585f76eba493dfe859a6e15"}